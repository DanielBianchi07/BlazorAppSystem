@page "/treinamentos/cadastrar"
@using BlazorApp.Shared.Enums
@inherits CreateTreinamentoPage

<MudContainer>
    <MudText Typo="Typo.h4" Class="mt-10 mb-6">Novo Treinamento</MudText>

    <EditForm Model="@InputModel" Context="TreinamentoForm" OnValidSubmit="OnValidSubmitAsync">
        <MudPaper Class="pa-8" Outlined="true">
            <ObjectGraphDataAnnotationsValidator />
            <DataAnnotationsValidator />
            <MudPaper Class="d-flex justify-space-around">
                <MudSelect T="string"
                           Label="Cursos"
                           @bind-Value="CursoId"
                           AnchorOrigin="Origin.BottomCenter"
                           Class="mb-5 pa-2">
                    @foreach (var curso in Cursos)
                    {
                        <MudSelectItem T="string" Value="@curso.Id.ToString()">
                            @curso.Nome
                        </MudSelectItem>

                    }
                </MudSelect>
            </MudPaper>
            <MudPaper Square="true" Class="d-flex justify-space-around">
                <MudSelect T="ETipoTreinamento"
                           Label="Tipo"
                           @bind-Value="tipoTreinamento"
                           AnchorOrigin="Origin.BottomCenter"
                           Class="mb-5 pa-1">
                        <MudSelectItem T="ETipoTreinamento" Value="ETipoTreinamento.Inicial">
                            Inicial
                        </MudSelectItem>
                    <MudSelectItem T="ETipoTreinamento" Value="ETipoTreinamento.Periodico">
                        Periódico
                    </MudSelectItem>

                </MudSelect>
            </MudPaper>
            
            <MudPaper Square="true" Class="d-flex flex-column align-items-center p-2">
                <MudItem lg="12" Class="d-flex align-items-center mb-4">

                <MudSelect T="string"
                           Label="Empresas"
                           @bind-Value="EmpresaId"
                           AnchorOrigin="Origin.BottomCenter"
                           Class="mb-5 pa-2">
                    @foreach (var empresa in Empresas)
                    {
                        <MudSelectItem T="string" Value="@empresa.Id.ToString()">
                            @empresa.RazaoSocial
                        </MudSelectItem>
                    }
                </MudSelect>
                    <MudIconButton Icon="@Icons.Material.Filled.Add" Color="@Color.Success" OnClick="AddEmpresa" />

                </MudItem>

                <MudItem lg="6">
                    <MudPaper>
                        <MudTable Items="Empresas" Striped="true" Hover="true">
                            <RowTemplate>
                                @foreach(var empr in EmpresasId)
                                {
                                    @if(context.Id == empr)
                                    {
                                        <tr>
                                                <MudText Typo="Typo.body1">@context.RazaoSocial</MudText>
                                        </tr>
                                    }
                                }         
                            </RowTemplate>
                        </MudTable>
                    </MudPaper>
                </MudItem>                                    
            </MudPaper>
            
            
            <MudPaper Square="true" Class="d-flex flex-column align-items-center p-2">
                <MudItem lg="12" Class="d-flex align-items-center mb-4">
                <MudSelect T="string"
                           Label="Alunos"
                           @bind-Value="AlunoId"
                           AnchorOrigin="Origin.BottomCenter"
                           Class="mb-5 pa-2">
                    @foreach (var aluno in Alunos)
                    {
                        <MudSelectItem T="string" Value="@aluno.Id.ToString()">
                            @aluno.Nome | | @aluno.Cpf
                        </MudSelectItem>

                    }
                </MudSelect>
                <MudIconButton Icon="@Icons.Material.Filled.Add" Color="@Color.Success" OnClick="AddAluno" />
                </MudItem>
            
            <MudItem lg="6">
                <MudPaper>
                    <MudTable Items="Alunos" Striped="true" Hover="true">
                        <RowTemplate>
                            @foreach (var aln in AlunosId)
                            {
                                @if (context.Id == aln)
                                {
                                    <tr>
                                        <MudText Typo="Typo.body1">@context.Nome</MudText>
                                    </tr>
                                }
                            }
                        </RowTemplate>
                    </MudTable>
                </MudPaper>
            </MudItem>
        </MudPaper>


            <MudPaper Square="true" Class="d-flex flex-column align-items-center p-2">
                <MudItem lg="12" Class="d-flex align-items-center mb-4">
                <MudSelect T="string"
                           Label="Instrutores"
                           @bind-Value="InstrutorId"
                           AnchorOrigin="Origin.CenterCenter"
                           Class="mb-5 pa-2">
                    @foreach (var Instrutor in Instrutores)
                    {
                        <MudSelectItem T="string" Value="@Instrutor.Id.ToString()">
                            <text style="color:green">@Instrutor.Nome</text> | | <text style="color:darkslategray">@Instrutor.Especializacao</text>
                        </MudSelectItem>

                    }
                </MudSelect>
                    <MudIconButton Icon="@Icons.Material.Filled.Add" Color="@Color.Success" OnClick="AddInstrutor" />
                </MudItem>

                <MudItem lg="6">
                    <MudPaper>
                        <MudTable Items="Instrutores" Striped="true" Hover="true">
                            <RowTemplate>
                                @foreach (var inst in InstrutoresId)
                                {
                                    @if (context.Id == inst)
                                    {
                                        <tr>
                                            <MudText Typo="Typo.body1">@context.Nome</MudText>
                                        </tr>
                                    }
                                }
                            </RowTemplate>
                        </MudTable>
                    </MudPaper>
                </MudItem>
            </MudPaper>

        <MudButton ButtonType="ButtonType.Submit"
                   Variant="Variant.Filled"
                   Color="Color.Primary"
                   Class="mt-8 mb-10">
            Cadastrar
        </MudButton>
        </MudPaper>
    </EditForm>
</MudContainer>

